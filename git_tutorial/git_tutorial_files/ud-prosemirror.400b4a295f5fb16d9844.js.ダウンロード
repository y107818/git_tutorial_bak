(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ud-prosemirror"],{"./src/udemy/js/ud-prosemirror/index.js":function(e,t,r){"use strict";r.r(t);var n={};r.r(n);r.d(n,"RichTextSerializer",(function(){return f}));r.d(n,"PlainTextSerializer",(function(){return l}));r.d(n,"overrideDoc",(function(){return d}));r.d(n,"selectBetween",(function(){return p}));r.d(n,"setCursorAndFocus",(function(){return v}));r.d(n,"isMarkActive",(function(){return m}));r.d(n,"getAnchorSelectionRange",(function(){return h}));r.d(n,"parseAnchorForm",(function(){return g}));r.d(n,"parseImageEditor",(function(){return O}));r.d(n,"getCodeBlockRange",(function(){return E}));r.d(n,"isSelectionInCodeBlock",(function(){return _}));r.d(n,"getTextWithNormalizedNewlines",(function(){return b}));r.d(n,"getTextWithNormalizedNewlinesFromDOMNode",(function(){return A}));r.d(n,"parseTextDirection",(function(){return T}));r.d(n,"applyHackToPreserveEmptyLines",(function(){return M}));r.d(n,"applyHackToPreserveWhitespace",(function(){return S}));var a=r("./node_modules/prosemirror-model/dist/index.js");var o=r("./node_modules/prosemirror-state/dist/index.js");var i=r("./src/udemy/js/base-components/udheavy/rich-text-editor/constants.js");var s=r("./src/udemy/js/base-components/udheavy/rich-text-editor/helpers.js");function c(e,t){var r=a["DOMParser"].fromSchema(e);r.parseSlice=function t(r,n){var o=a["DOMParser"].prototype.parseSlice.call(this,r,n);var i=o.content;o.content.forEach((function(t,r,n){if(t.type===e.nodes.hard_break){var a=e.nodes.paragraph.create();i=i.replaceChild(n,a)}}));return a["Slice"].maxOpen(i)};r.parseClipboardText=function e(t,n){var a=Object(s["b"])().createElement("div");t.split(/\r\n?|\n/).forEach((function(e){var t=Object(s["b"])().createElement("p");t.textContent=e;a.appendChild(t)}));return r.parseSlice(a,{preserveWhitespace:true,context:n})};r.transformPastedHTML=function r(n){var a=Object(s["b"])().createElement("div");a.innerHTML=n;if(t==="PLAIN_TEXT"){var o=A(a);a.innerHTML=o.split("\n").map((function(e){var t=Object(s["b"])().createElement("p");t.style.whiteSpace="pre";t.textContent=e;return t.outerHTML})).join("")}else{var i=!!e.nodes.code_block;var c=function e(t,r){var n=Object(s["b"])().createElement("pre");n.textContent=r;t.parentNode.replaceChild(n,t)};var u=function e(t,r){var n=t.parentNode;r.split("\n").forEach((function(e){var r=Object(s["b"])().createElement("p");r.style.whiteSpace="pre";r.textContent=e;n.insertBefore(r,t)}));n.removeChild(t)};Array.from(a.querySelectorAll("pre")).forEach((function(e){var t=A(e);e.textContent=t;if(!i){u(e,t)}}));Array.from(a.querySelectorAll("div")).filter((function(e){return e.style.whiteSpace==="pre"})).forEach((function(e){var t=A(e);i?c(e,t):u(e,t)}))}return a.innerHTML};return r}function u(e){var t=a["DOMSerializer"].fromSchema(e);t.serializeNode=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(t.type.name==="code_block"){return a["DOMSerializer"].prototype.serializeNode.call(this,t,babelHelpers.objectSpread({},r,{skipPreserveWhitespaceHack:true}))}if(t.isText&&!r.skipPreserveWhitespaceHack){t=S(t)}var n=a["DOMSerializer"].prototype.serializeNode.call(this,t,r);if(t.type.name==="paragraph"&&t.childCount===0){return M(n)}return n};return t}var f=function(){function e(t,r){babelHelpers.classCallCheck(this,e);this.fromDOMSerializer=c(t,this.mode);this.toDOMSerializer=u(t);this.parseOptions=r}babelHelpers.createClass(e,[{key:"toInternalValue",value:function e(t){var r=Object(s["b"])().createElement("div");r.innerHTML=t;return this.fromDOMSerializer.parse(r,this.parseOptions)}},{key:"toText",value:function e(t){if(t.content.size<=i["c"]){return""}var r=this.toDOMSerializer.serializeFragment(t.content);var n=Object(s["b"])().createElement("div");n.appendChild(r);Array.from(n.querySelectorAll('a[id^="rt-link--"]')).forEach((function(e){e.removeAttribute("id")}));return n.innerHTML}},{key:"mode",get:function e(){return"RICH_TEXT"}}]);return e}();var l=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"toText",value:function e(t){if(t.content.size<=i["c"]){return""}var r=this.toDOMSerializer.serializeFragment(t.content);var n=[];for(var a=0;a<r.childNodes.length;a++){var o=r.childNodes[a];n.push(o.textContent)}return n.join("\n")}},{key:"mode",get:function e(){return"PLAIN_TEXT"}}]);return t}(f);function d(e,t){e.dispatch(e.state.tr.replaceWith(0,e.state.doc.content.size,t));e.dom.scrollTop=e.dom.scrollHeight}function p(e,t,r,n){var a;if(r===0&&n===t.content.size){a=new o["AllSelection"](t)}else{var i=t.resolve(r);var s=r===n?i:t.resolve(n);a=o["TextSelection"].between(i,s)}return e.setSelection(a)}function v(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(t===null){t=e.state.doc.content.size;e.dom.scrollTop=e.dom.scrollHeight}e.dispatch(p(e.state.tr,e.state.doc,t,t).scrollIntoView());e.focus()}function m(e,t){var r=e.selection;if(r.empty){return!!t.isInSet(e.storedMarks||r.$from.marks())}var n=true;var a=false;e.doc.nodesBetween(r.from,r.to,(function(e){if(e.isText){a=true;if(!t.isInSet(e.marks)){n=false}}return n}));return a&&n}function h(e){var t=e.selection;if(t.empty){var r=t.$cursor;var n=r.pos;var a=n-r.parentOffset;var o=a+r.parent.content.size;var i=null;e.doc.nodesBetween(a,o,(function(t,r){if(e.schema.marks.link.isInSet(t.marks)){var a=r;var o=r+t.nodeSize;if(i&&i.to===a){i.to=o}else if(n>=a&&n<=o){i={from:a,to:o}}}}));if(i){return i}}return{from:t.from,to:t.to}}function g(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{parseFormData:true};var r=h(e);var n=e.doc.rangeHasMark(r.from,r.to,e.schema.marks.link);var a={text:"",href:"",hasAnchor:n};if(t.parseFormData){a.text=e.doc.textBetween(r.from,r.to);if(n){var o=null;e.doc.nodesBetween(r.from,r.to,(function(t){if(!o){o=t.marks.find((function(t){return t.type===e.schema.marks.link}))}return!o}));if(o){a.href=o.attrs.href||""}}}return a}function O(e,t){var r=e.doc.resolve(t);var n=r.nodeAfter;var a=n.marks.find((function(t){return t.type===e.schema.marks.link}));var o=r.parent;var i=t-r.parentOffset-1;var s=o.type===e.schema.nodes.figure?o:null;var c=s?i:null;var u=t+n.nodeSize;var f=e.doc.nodeAt(u);var l=null;var d=null;if(f&&f.isText){var p=f.marks.some((function(t){return t.type===e.schema.marks.figcaption}));if(p){l=f;d=u}}return{image:n,imagePos:t,link:a,figure:s,figurePos:c,caption:l,captionPos:d}}function E(e,t){var r=t.$from;var n=t.$to;if(t instanceof o["AllSelection"]&&e.content.size>i["c"]){r=e.resolve(1);n=e.resolve(e.content.size-1)}var a=r.blockRange(n);if(a.$from.parent.type.spec.code){return{node:a.$from.parent,pos:a.$from.pos-a.$from.parentOffset-1}}return null}function _(e,t){return!!E(e,t)}function b(e,t){var r=[];var n=false;e.descendants((function(e){if(e.isBlock&&n){r.push("\n")}if(e.isBlock){n=true}if(e.isText){r.push(e.text)}if(e.type===t.nodes.hard_break){r.push("\n")}}));return r.join("")}function A(e){e.innerHTML=e.innerHTML.replace(/<br\s*\/?>/g,"\n");Array.from(e.querySelectorAll("div")).filter((function(e){return!e.querySelector("div")&&!!e.nextSibling})).forEach((function(e){e.textContent="".concat(e.textContent,"\n")}));return e.textContent}function T(e){var t=(e.style.direction||"").toLowerCase().replace("!important","").trim();var r=(e.dir||"").toLowerCase();var n=t||r;return n==="rtl"?"rtl":""}function M(e){e.appendChild(Object(s["b"])().createElement("br"));return e}function S(e){var t=" ";return e.withText(e.textContent.replace(/ +/g,(function(e){if(e.length===1){return" "}var r=[];for(var n=0;n<e.length;n++){if(n%2===0){r.push(t)}else{r.push(" ")}}return r.join("")})))}var k=r("./node_modules/prosemirror-view/dist/index.js");var I=r("./node_modules/prosemirror-commands/dist/commands.js");var D=r("./node_modules/prosemirror-history/dist/history.js");var R=r("./node_modules/prosemirror-schema-list/dist/schema-list.js");function y(e,t,r){var n=t.marks,a=t.nodes;var o=re(Object(I["toggleMark"])(n.code));var i=G(Object(I["setBlockType"])(a.paragraph),o);var s=Object(R["wrapInList"])(a.bullet_list);var c=Object(R["wrapInList"])(a.ordered_list);var u=Object(R["liftListItem"])(a.list_item);var f={};Object.entries({UNDO:D["undo"],REDO:D["redo"],UNDO_FORMAT:N(),ADD_HARD_BREAK:z(),ADD_NON_BREAKING_SPACE:H(),TOGGLE_STRONG:Object(I["toggleMark"])(n.strong),TOGGLE_EM:Object(I["toggleMark"])(n.em),SET_PARAGRAPH:i,TOGGLE_BLOCKQUOTE:j(a.blockquote),TOGGLE_HEADING:C(Object(I["setBlockType"])(a.heading),i),PROMPT_ANCHOR:x(r),ADD_ANCHOR:P(r),UNDO_ANCHOR:B(r),PROMPT_IMAGE_UPLOAD:W(r),PROMPT_IMAGE_EDIT:U(r),ADD_IMAGE:$(r),EDIT_IMAGE:K(r),CLICK_IMAGE:q(r),RESIZE_IMAGE:V(r),DELETE_FIGURE:X(),DELETE_IMAGE:J(r),EXIT_FIGURE:Q(),ARROW_UP_NEAR_IMAGE:Z("ArrowUp"),ARROW_LEFT_NEAR_IMAGE:Z("ArrowLeft"),ARROW_DOWN_NEAR_IMAGE:Z("ArrowDown"),ARROW_RIGHT_NEAR_IMAGE:Z("ArrowRight"),WRAP_ORDERED_LIST:c,TOGGLE_ORDERED_LIST:L(a.ordered_list,c,F(u,a.ordered_list)),WRAP_BULLET_LIST:s,TOGGLE_BULLET_LIST:L(a.bullet_list,s,F(u,a.bullet_list)),LIFT_LIST_ITEM:u,SINK_LIST_ITEM:Object(R["sinkListItem"])(a.list_item),SPLIT_LIST_ITEM:Object(R["splitListItem"])(a.list_item),TOGGLE_CODE:o,CONVERT_TAB_TO_SPACES:Y(),EXIT_FIRST_BLOCK:ee(),EXIT_LAST_BLOCK:te(),PROMPT_MATH_INSERT:ne(r),PROMPT_MATH_EDIT:ae(r),ADD_MATH:oe(r),CLICK_MATH:ie(r),TOGGLE_HTML_MODE:se(r)}).forEach((function(t){var r=babelHelpers.slicedToArray(t,2),n=r[0],a=r[1];if(e.has(n)){f[n]=a}}));return f}function C(e,t){return function(r,n,a){var o=e(r,n,a);if(o){return true}return t(r,n,a)}}function L(e,t,r){var n=C(t,r);var a=C(r,t);return function(e,t,r){var o=e.selection;var i=0;if(o.from<o.to){e.doc.nodesBetween(o.from,o.to,(function(){i+=1;return i<=1}))}if(i>1){return a(e,t,r)}return n(e,t,r)}}function N(){var e=["strong","em","code"];return function(t,r){if(r){var n=t.selection;var a=t.tr;e.forEach((function(e){var r=t.schema.marks[e];if(r){a=a.removeMark(n.from,n.to,r)}}));r(a)}return true}}function w(e,t){var r=e.selection;var n=r.$from;var a=r.$to;if(r instanceof o["AllSelection"]&&e.doc.content.size>i["c"]){n=e.doc.resolve(1);a=e.doc.resolve(e.doc.content.size-1);if(t){t(p(e.tr,e.doc,n.pos,a.pos))}return true}return false}function G(e,t){return function(r,n,a){var o=r.schema.nodes.blockquote;var i=r.schema.nodes.code_block;if(w(r,n)){r=a.state}var s=r.selection;if(o){var c=!!s.$from.blockRange(s.$to,(function(e){return e.type===o}));if(c){var u=Object(I["lift"])(r,n);if(u){r=a.state}}}if(i){var f=E(r.doc,s);if(f){if(n){var l=f.pos+f.node.nodeSize-1;n(p(r.tr,r.doc,f.pos,l));r=a.state}var d=t(r,n,a);if(d){r=a.state}}}return e(r,n)}}function j(e){var t=Object(I["wrapIn"])(e);return function(r,n,a){if(w(r,n)){r=a.state}var o=r.selection;var i=!!o.$from.blockRange(o.$to,(function(t){return t.type===e}));if(i){return Object(I["lift"])(r,n)}return t(r,n)}}function z(){return Object(I["chainCommands"])(I["exitCode"],(function(e,t){if(t){var r=e.schema.nodes.hard_break.create();t(e.tr.replaceSelectionWith(r))}return true}))}function H(){return function(e,t){if(t){t(e.tr.insertText(" "))}return true}}function x(e){return function(t,r){if(r){if(e.anchorForm.isEditing){var n=h(t);r(p(t.tr,t.doc,n.from,n.to))}e.openAnchorModal(t)}return true}}function P(e){return function(t,r){var n=e.anchorForm;var a=n.isValid({commit:!!r});if(!a){return false}if(r){var o=t.schema.marks.link;var i=[o.create({href:n.data.href})];Object.values(t.schema.marks).filter((function(e){return e!==o&&m(t,e)})).forEach((function(e){i.push(e.create())}));var s=t.schema.text(n.data.text,i);r(t.tr.replaceSelectionWith(s,false));e.closeModal()}return true}}function B(e){return function(t,r){if(r){var n=h(t);var a=t.schema.marks.link;r(t.tr.removeMark(n.from,n.to,a));e.hideAnchorTooltip()}return true}}function F(e,t){return function(r,n){var a=e(r,n);if(a){return true}var o=r.selection;var i=null;var s=null;var c=null;r.doc.nodesBetween(o.from,o.to,(function(e,r){if(e.type===t&&!i){i=e;s=r+1;c=r+i.content.size}return!i}));if(i&&s<c){r=r.apply(p(r.tr,r.doc,s,c));return e(r,n)}return false}}function W(e){return function(t,r){if(r){e.openImageUploadModal(t)}return true}}function U(e){return function(t,r){if(r){e.openImageEditModal(t)}return true}}function $(e){return function(t,r){if(r){var n=t.schema.nodes.figure;var o=t.schema.nodes.image;var i=e.imageUploader;var s=[];i.files.filter((function(e){return!!e.url})).forEach((function(e){var t=o.createAndFill({src:e.url});var r=n.create({},[t],[]);s.push(r)}));var c=new a["Slice"](a["Fragment"].from(s),0,0);r(t.tr.replaceSelection(c));i.resetFiles();if(!i.hasError){e.closeModal()}}return true}}function K(e){function t(e,t,r){var n=[];if(r.data.href){n.push(e.mark(e.marks.link,{href:r.data.href}))}return e.nodes.image.createAndFill(babelHelpers.objectSpread({},t.attrs,{alt:r.data.alt}),t.content,n)}return function(r,n){var a=e.activeImageEditor;if(!a){return false}var o=e.imageEditForm;var i=o.isValid({commit:!!n});if(!i){return false}if(n){var s=r.tr;var c=a.getPos();var u=O(r,c),f=u.figure,l=u.image,d=u.caption,v=u.captionPos;var m=c+l.nodeSize;var h=t(r.schema,l,o);s=s.replaceWith(c,m,h);var g;if(o.data.caption){var E=r.schema.mark(r.schema.marks.figcaption);var _=r.schema.text(o.data.caption,[E]);if(f){if(d){s=s.replaceWith(v,v+d.nodeSize,_)}else{s=s.insert(m,_)}g=m+_.nodeSize}else{var b=[h,_];var A=r.schema.nodes.figure.create({},b,[]);s=s.replaceWith(c,m,A);g=m+_.nodeSize+2}s=p(s,s.doc,g,g)}else if(d){s=s["delete"](v,v+d.nodeSize);g=m;s=p(s,s.doc,g,g)}else{g=m;s=p(s,s.doc,g,g)}n(s);e.closeModal()}return true}}function V(e){return function(t,r){var n=e.activeImageEditor;if(!n){return false}var a=e.imageEditForm;var o=a.isValid({commit:!!r});if(!o){return false}if(r){var i=n.getPos();var s=t.doc.nodeAt(i);var c=i+s.nodeSize;var u=t.schema.nodes.image.createAndFill(babelHelpers.objectSpread({},s.attrs,{width:e.imageEditForm.data.width,height:e.imageEditForm.data.height}),s.content,s.marks);var f=t.tr.replaceWith(i,c,u);f=p(f,f.doc,c,c);r(f)}return true}}function q(e){return function(t,r){var n=e.activeImageEditor;if(!n){return false}if(r){var a=n.getPos();var o=a+1;r(p(t.tr,t.doc,o,o))}return true}}function X(){return function(e,t){var r=e.schema.nodes.figure;var n=e.schema.nodes.image;var a=e.selection;var o=a.$from.parent;if(o.type===r&&o===a.$to.parent){var i=false;o.descendants((function(e){if(e.type===n){i=true}return!i}));if(!i){var s=a.$from.pos-a.$from.parentOffset-1;var c=s+o.nodeSize;if(t){var u=e.schema.nodes.paragraph;var f=e.schema.marks.figcaption;var l=e.tr.setBlockType(s,c,u,{});l=l.removeMark(s,c,f);t(l)}return true}}return false}}function J(e){return function(t,r){var n=e.activeImageEditor;if(!n){return false}if(r){var a=n.getPos();var o=t.doc.nodeAt(a);var i=a+o.nodeSize;var s=t.doc.resolve(a);var c=s.parent;var u=t.tr;var f;if(c.type===t.schema.nodes.figure){var l=a-s.parentOffset;var d=l+c.content.size;u=u.deleteRange(l,d);f=l-1}else{u=u.deleteRange(a,i);f=a-1}r(p(u,u.doc,f,f));e.closeModal()}return true}}function Q(){return function(e,t){var r=e.selection.$cursor;var n=e.schema.nodes.figure;if(!r||!r.parent||r.parent.type!==n){return false}var a=e.schema.nodes.image;var o=e.schema.marks.figcaption;var i=r.parent;var s=r.pos-r.parentOffset-1;var c=s+i.nodeSize;var u=null;e.doc.nodesBetween(s,c,(function(t,r){if(t.type===a){u=e.doc.resolve(r)}return!u}));if(!u){return false}var f=u.pos;var l=u.pos+u.nodeAfter.nodeSize;var d,v,m,h;if(s<=r.pos&&r.pos<=f){d=s+1;v=r.pos;m=s;h=m+(v-d)+1}else if(l<=r.pos&&r.pos<=c){d=r.pos;v=c-1;m=r.pos+1;h=m}else{return false}if(t){var g=e.doc.slice(d,v);var O=e.schema.nodes.paragraph.create({},g.content);var E=e.tr["delete"](d,v);E=E.insert(m,O);E=E.removeMark(m,m+O.nodeSize,o);E=p(E,E.doc,h,h);t(E)}return true}}function Z(e){return function(t,r){var n=t.selection.$cursor;var a=t.schema.nodes.image;if(!n){return false}var o=n.pos,i=n.parent,s=n.parentOffset,c=n.nodeBefore,u=n.nodeAfter;var f=!!u&&u.type===a;var l=!!c&&c.type===a;if(!f&&!l){return false}var d=t.doc.resolve(Math.max(o-s-1,0));var v=null;if(e==="ArrowUp"){if(d.nodeBefore){v=d.pos-1}else if(c){v=d.pos}}else if(f&&e==="ArrowLeft"){if(c){v=o-1}else if(d.nodeBefore){v=d.pos-1}}else if(l&&e==="ArrowLeft"){v=o-1}else if(e==="ArrowDown"){if(d.nodeAfter){v=d.pos+i.nodeSize}}else if(l&&e==="ArrowRight"){if(u){v=o+1}else if(d.nodeAfter){v=d.pos+i.nodeSize}}else if(f&&e==="ArrowRight"){v=o+1}if(r&&v!==null&&v!==o){r(p(t.tr,t.doc,v,v))}return true}}function Y(){return function(e,t){var r=e.selection;if(_(e.doc,r)&&t){t(e.tr.insertText("    "));return true}return false}}function ee(){return function(e,t){var r=[e.schema.nodes.blockquote,e.schema.nodes.code_block];var n=e.selection.$cursor;var a=e.doc.firstChild;if(n&&n.pos-n.depth===0&&a&&r.includes(a.type)){if(t){var o=0;var i=e.schema.nodes.paragraph.create();var s=e.tr.insert(o,i);t(p(s,s.doc,o+1,o+1))}return true}return false}}function te(){return function(e,t){var r=[e.schema.nodes.blockquote,e.schema.nodes.code_block];var n=e.selection.$cursor;var a=e.doc.lastChild;var o=e.doc.content.size;if(n&&n.pos+n.depth===o&&a&&r.includes(a.type)){if(t){var i=o;var s=e.schema.nodes.paragraph.create();var c=e.tr.insert(i,s);t(p(c,c.doc,i+1,i+1))}return true}return false}}function re(e){return function(t,r,n){var a=t.selection;var o=t.schema.nodes.code_block;var s=_(t.doc,a);var c=t.doc.slice(a.from,a.to);var u=b(c.content,t.schema);var f=u.split("\n");if(!s&&f.length<=1){var l=e(t,r,n);if(l&&r){var d=t.doc.content.size===i["c"];t=n.state;var v=t.doc.content.size-1;if(!d&&a.to>=v&&m(t,t.schema.marks.code)){r(t.tr.insert(v,t.schema.text(" ",[])))}}return l}var h=t.schema.nodes.paragraph;var g=t.schema.nodes.hard_break;var O;if(s){O=f.map((function(e){var r=e?t.schema.text(e):null;return h.create({},r)}))}else{var E=u?t.schema.text(u):null;O=[o.create({},E)]}var A=O.reduce((function(e,t){return e+t.content.size}),0);if(A===0){return false}if(r){var T=t.tr.replaceWith(a.from,a.to,O);var M=[];var S="BEFORE_CONTENT";T.doc.nodesBetween(T.mapping.map(a.from),T.mapping.map(a.to),(function(e,t){if(S==="BEFORE_CONTENT"&&e===O[0]){S="IN_CONTENT"}if(e.isBlock){if(e.content.size===0&&S!=="IN_CONTENT"){M.push([t,t+e.nodeSize])}else if(e.content.size>0&&e.firstChild.type===g&&S==="AFTER_CONTENT"){var r=t+1;var n=r+e.firstChild.nodeSize;M.push([r,n])}else if(e.content.size>0&&e.lastChild.type===g&&S==="BEFORE_CONTENT"){var a=t+e.content.size;var o=a+e.lastChild.nodeSize;M.push([a,o])}}if(S==="IN_CONTENT"&&e===O[O.length-1]){S="AFTER_CONTENT"}}));M.reverse().forEach((function(e){var t=babelHelpers.slicedToArray(e,2),r=t[0],n=t[1];T=T.deleteRange(r,n)}));var k=T.mapping.map(a.from)+1;var I=T.mapping.map(a.to)-1;T=p(T,T.doc,k,I);r(T)}return true}}function ne(e){return function(t,r){if(r){e.mathForm.setMathRepresentation("");e.mathForm.setIsInline(false);e.mathForm.setIsEditing(false);e.openMathModal(t)}return true}}function ae(e){return function(t,r){if(r){e.mathForm.setIsEditing(true);e.openMathModal(t)}return true}}function oe(e){return function(t,r){if(r){var n=e.mathForm,a=n.mathRepresentation,o=n.isInline;var i=o?t.schema.nodes.math_inline:t.schema.nodes.math_block;var s=i.create({},[t.schema.text(a)],[]);r(t.tr.replaceSelectionWith(s));e.closeModal()}return true}}function ie(e){return function(t,r){var n=e.activeMathEditor;if(!n){return false}if(r){var a=n.getPos();var o=a+1;r(p(t.tr,t.doc,o,o))}return true}}function se(e){return function(t,r){if(r){e.toggleHTMLMode()}return true}}var ce=r("./node_modules/prosemirror-keymap/dist/keymap.js");var ue=typeof navigator!=="undefined"&&/Mac/.test(navigator.platform);function fe(e){var t={};[["ArrowDown","EXIT_LAST_BLOCK"],["ArrowDown","ARROW_DOWN_NEAR_IMAGE"],["ArrowLeft","ARROW_LEFT_NEAR_IMAGE"],["ArrowRight","ARROW_RIGHT_NEAR_IMAGE"],["ArrowUp","EXIT_FIRST_BLOCK"],["ArrowUp","ARROW_UP_NEAR_IMAGE"],["Ctrl-b","TOGGLE_STRONG"],["Ctrl-i","TOGGLE_EM"],["Ctrl-k","PROMPT_ANCHOR"],["Ctrl-Enter","ADD_HARD_BREAK",ue],["Ctrl-Space","ADD_NON_BREAKING_SPACE"],["Enter","EXIT_FIGURE"],["Enter","SPLIT_LIST_ITEM"],["Mod-[","LIFT_LIST_ITEM"],["Mod-]","SINK_LIST_ITEM"],["Mod-b","TOGGLE_STRONG"],["Mod-i","TOGGLE_EM"],["Mod-k","PROMPT_ANCHOR"],["Mod-y","REDO",!ue],["Mod-z","UNDO"],["Shift-Ctrl-.","TOGGLE_BLOCKQUOTE"],["Shift-Ctrl-0","SET_PARAGRAPH"],["Shift-Ctrl-".concat(i["e"]),"TOGGLE_HEADING"],["Shift-Ctrl-7","TOGGLE_ORDERED_LIST"],["Shift-Ctrl-8","TOGGLE_BULLET_LIST"],["Shift-Ctrl-m","UNDO_FORMAT"],["Shift-Enter","ADD_HARD_BREAK"],["Shift-Mod-m","UNDO_FORMAT"],["Shift-Mod-z","REDO"],["Shift-Space","ADD_NON_BREAKING_SPACE"],["Shift-Tab","LIFT_LIST_ITEM"],["Tab","CONVERT_TAB_TO_SPACES"],["Tab","SINK_LIST_ITEM"]].forEach((function(r){var n=babelHelpers.slicedToArray(r,3),a=n[0],o=n[1],i=n[2],s=i===void 0?true:i;if(o in e&&s){if(!(a in t)){t[a]=[]}t[a].push(e[o])}}));var r={};Object.entries(t).forEach((function(e){var t=babelHelpers.slicedToArray(e,2),n=t[0],a=t[1];if(a.length===1){r[n]=a[0]}else if(a.length>1){r[n]=I["chainCommands"].apply(void 0,babelHelpers.toConsumableArray(a))}}));return[Object(ce["keymap"])(r),Object(ce["keymap"])(I["baseKeymap"])]}function le(e,t){return[].concat(babelHelpers.toConsumableArray(fe(t)),[Object(D["history"])()])}var de=r("./src/udemy/js/utils/a11y.js");function pe(e){return new a["Schema"]({marks:ve(e),nodes:me(e)})}function ve(e){var t={};ge(e,i["f"],t,{figcaption:{parseDOM:[{tag:"figcaption",context:"figure/"}],toDOM:function e(){return["figcaption"]}}});ge(e,i["a"],t,{link:{attrs:{href:{},title:{default:""}},inclusive:false,parseDOM:[{tag:"a",getAttrs:function e(t){var r={href:t.getAttribute("href"),title:t.getAttribute("title")};var n={};var a={};Object(s["h"])(r.href,n,a,true);if(a.href){return false}return r}}],toDOM:function e(t){var r=Ee(babelHelpers.objectSpread({},t.attrs,{target:"_blank",rel:"noopener noreferrer",id:t.attrs.id||Object(de["a"])("rt-link")}));return["a",r]}}});ge(e,"TOGGLE_CODE",t,{code:{parseDOM:[{tag:"code"}],toDOM:function e(){return["code"]}}});ge(e,"TOGGLE_STRONG",t,{strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function e(t){return t.style.fontWeight!=="normal"}},{style:"font-weight",getAttrs:function e(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)}}],toDOM:function e(){return["strong"]}}});ge(e,"TOGGLE_EM",t,{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function e(){return["em"]}}});return t}function me(e){var t=he();ge(e,"ADD_HARD_BREAK",t,{hard_break:{inline:true,group:"inline",selectable:false,parseDOM:[{tag:"br",ignore:true,getAttrs:function e(t){return Oe(t)?{}:false}},{tag:"br",getAttrs:function e(t){return Oe(t)?false:{}}}],toDOM:function e(){return["br"]}}});ge(e,i["b"],t,{blockquote:{attrs:{dir:{default:""}},reparseInView:true,content:"block+",group:"block",defining:true,parseDOM:[{tag:"blockquote",getAttrs:function e(t){return{dir:T(t)}}}],toDOM:function e(t){return["blockquote",Ee(t.attrs),0]}},heading:{attrs:{dir:{default:""}},reparseInView:true,content:"inline*",group:"block",defining:true,parseDOM:["h1","h2","h3","h4","h5","h6"].map((function(e){return{tag:e,getAttrs:function e(t){return{dir:T(t)}}}})),toDOM:function e(t){return["h".concat(i["e"]),Ee(t.attrs),0]}}});ge(e,i["g"],t,{ordered_list:{attrs:{order:{default:1},dir:{default:""}},reparseInView:true,parseDOM:[{tag:"ol",getAttrs:function e(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,dir:T(t)}}}],toDOM:function e(t){return["ol",Ee({start:t.attrs.order===1?"":t.attrs.order,dir:t.attrs.dir}),0]},content:"list_item+",group:"block"},bullet_list:{attrs:{dir:{default:""}},reparseInView:true,parseDOM:[{tag:"ul",getAttrs:function e(t){return{dir:T(t)}}}],toDOM:function e(t){return["ul",Ee(t.attrs),0]},content:"list_item+",group:"block"},list_item:{attrs:{dir:{default:""}},reparseInView:true,parseDOM:[{tag:"li",getAttrs:function e(t){return{dir:T(t)}}}],toDOM:function e(t){return["li",Ee(t.attrs),0]},defining:true,content:"block+"}});ge(e,i["f"],t,{figure:{attrs:{dir:{default:""}},reparseInView:true,content:"inline*",group:"block",parseDOM:[{tag:"figure",getAttrs:function e(t){if(t.querySelectorAll("img").length!==1){return false}return{dir:T(t)}}}],toDOM:function e(t){return["figure",Ee(t.attrs),0]}},image:{inline:true,attrs:{src:{},width:{default:""},height:{default:""},alt:{default:""}},draggable:false,group:"inline",parseDOM:[{tag:"img",getAttrs:function e(t){var r={src:t.getAttribute("src"),width:t.getAttribute("width"),height:t.getAttribute("height"),alt:t.getAttribute("alt")||t.getAttribute("title")};if(!r.src){return false}return r}}],toDOM:function e(t){var r=Ee(babelHelpers.objectSpread({},t.attrs,{title:t.attrs.alt}));return["img",r]}}});ge(e,"TOGGLE_CODE",t,{code_block:{attrs:{dir:{default:""}},reparseInView:true,content:"text*",marks:"",group:"block",code:true,defining:true,parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function e(t){return{dir:T(t)}}}],toDOM:function e(t){var r=Ee(babelHelpers.objectSpread({},t.attrs,{class:"prettyprint linenums"}));return["pre",r,0]}}});ge(e,i["i"],t,{math_inline:{group:"inline",attrs:{"data-ud-math-type":{default:""}},content:"text*",inline:true,atom:true,parseDOM:[{tag:"span",getAttrs:function e(t){return t.getAttribute("data-ud-math-type")==="inline"?{}:false}}],toDOM:function e(){return["span",{"data-ud-math-type":"inline"},0]}},math_block:{group:"block",attrs:{"data-ud-math-type":{default:""}},content:"text*",atom:true,code:true,parseDOM:[{tag:"div",getAttrs:function e(t){return t.getAttribute("data-ud-math-type")==="block"?{}:false}}],toDOM:function e(){return["div",{"data-ud-math-type":"block"},0]}}});return t}function he(){return{doc:{content:"block+"},paragraph:{attrs:{dir:{default:""}},reparseInView:true,content:"inline*",group:"block",parseDOM:[{tag:"p",preserveWhitespace:"full",getAttrs:function e(t){if((t.style.whiteSpace||"").toLowerCase()!=="pre"){return false}return{dir:T(t)}}},{tag:"p",getAttrs:function e(t){if((t.style.whiteSpace||"").toLowerCase()==="pre"){return false}return{dir:T(t)}}},{tag:"br",context:"doc/",getAttrs:function e(t){return{dir:T(t)}}}],toDOM:function e(t){return["p",Ee(t.attrs),0]}},text:{group:"inline"}}}function ge(e,t,r){if(Object(s["d"])(e,t)){for(var n=arguments.length,a=new Array(n>3?n-3:0),o=3;o<n;o++){a[o-3]=arguments[o]}Object.assign.apply(Object,[r].concat(a))}}function Oe(e){var t=e.parentNode;return!!(t&&t.tagName&&t.tagName.toLowerCase()==="p"&&t.childNodes.length===1)}function Ee(e){Object.keys(e).forEach((function(t){if(e[t]===""){delete e[t]}}));return e}r.d(t,"EditorState",(function(){return o["EditorState"]}));r.d(t,"EditorView",(function(){return k["EditorView"]}));r.d(t,"buildCommands",(function(){return y}));r.d(t,"buildPlugins",(function(){return le}));r.d(t,"buildSchema",(function(){return pe}));r.d(t,"helpers",(function(){return n}))}}]);
//# sourceMappingURL=ud-prosemirror.400b4a295f5fb16d9844.js.map